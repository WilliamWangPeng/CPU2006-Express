# To display gcc information:
# gcc -march=native -Q --help=target
#
# Instruction Set Extensions: AVX
#####################################################################
# Header Section 
#####################################################################

tester      = Intel Corporation
reportable  = yes
action      = validate
output_format = csv,text,html,config
ext         = proc
allow_extension_override = yes
PATHSEP     = /

check_md5=0

default=default=default=default:
#####################################################################
#
# Compiler selection
#
#####################################################################
# NOTE: The path may be different if you use the compiler from
#       the gnu site.
CC  = gcc -m64 -static
CXX = g++ -m64 -static
FC  = gfortran -m64 -static
F77  = gfortran -m64 -static
OBJ = .o

#####################################################################
# Hardware Info
#####################################################################
hw_vendor          = Intel Corporation
hw_model           = Intel Xeon E5-1650
hw_cpu_char        = Intel Turbo Boost Technology up to 3.80 GHz
hw_cpu_mhz         = 3200
hw_fpu             = Integrated
hw_ncores          = 12
hw_ncoresperchip   = 6
hw_nthreadspercore = 1
hw_ncpuorder       = 1,2 chips
hw_pcache          = 32 KB I + 32 KB D on chip per core
hw_scache          = 256 KB I+D on chip per core
hw_tcache          = 12 MB I+D on chip per chip
hw_ocache          = None
hw_vendor          = Intel Corporation
hw_other           = None

## SW config
# default sysinfo is expected to write prepared_by, sw_os, sw_file, sw_state
# Descriptions of the different compilers tested
sw_compiler        = gcc, g++ & gfortran 4.8.2
sw_other           = None
sw_base_ptrsize    = 64-bit
sw_peak_ptrsize    = 64-bit

#####################################################################
# Notes
#####################################################################
notes_submit_000 ='numactl' was used to bind copies to the cores.
notes_submit_005 =See the configuration file for details.

notes_os_000 ='ulimit -s unlimited' was used to set environment stack size

#####################################################################
# Optimization
#####################################################################

# Peak is high opt
default=peak=default=default:

OPTIMIZE = -Ofast -funroll-loops -flto -mfpmath=sse -fschedule-insns -m32 -march=corei7-avx
PASS1_CFLAGS     = $(OPTIMIZE) -fprofile-generate
PASS2_CFLAGS     = $(OPTIMIZE) -fprofile-use
PASS1_FFLAGS     = $(OPTIMIZE) -fprofile-generate
PASS2_FFLAGS     = $(OPTIMIZE) -fprofile-use
PASS1_CXXFLAGS   = $(OPTIMIZE) -fprofile-generate
PASS2_CXXFLAGS   = $(OPTIMIZE) -fprofile-use
PASS1_LDCFLAGS   = $(OPTIMIZE) -fprofile-generate
PASS2_LDCFLAGS   = $(OPTIMIZE) -fprofile-use
PASS1_LDCXXFLAGS = $(OPTIMIZE) -fprofile-generate
PASS2_LDCXXFLAGS = $(OPTIMIZE) -fprofile-use
PASS1_LDFFLAGS   = $(OPTIMIZE) -fprofile-generate
PASS2_LDFFLAGS   = $(OPTIMIZE) -fprofile-use

feedback=1

## Base is low opt
default=base=default=default:
OPTIMIZE  = -Ofast -funroll-loops -flto -mfpmath=sse -fschedule-insns -m32 -march=corei7-avx

#####################################################################
# Portability
#####################################################################

default=default=default=default:
notes25= PORTABILITY=-DSPEC_CPU_LP64 is applied to all benchmarks.
PORTABILITY = -DSPEC_CPU_LP64

#403.gcc=default=default=default:
#notes30= 403.gcc: -Dalloca=_builtin_alloca
#EXTRA_CFLAGS= -Dalloca=__builtin_alloca

400.perlbench=default=default=default:
notes35    = 400.perlbench: -DSPEC_CPU_LINUX_X64
EXTRA_CFLAGS = -DSPEC_CPU_LINUX_X64 -fno-strict-aliasing
#srcalt=attribute

#447.dealII=default=default=default:
#srcalt=cstddef

450.soplex=default=default=default:
EXTRA_CXXFLAGS = -fno-strict-aliasing

# PGI uses this;
#435.gromacs=default=default=default:
#notes40= 435.gromacs: EXTRA_LDFLAGS= -Mnomain
#EXTRA_LDFLAGS= -Mnomain

436.cactusADM=default=default=default:
notes45= cactusADM: FPORTABILITY= -fno-second-underscore
#PGI uses this: EXTRA_LDFLAGS= -Mnomain
FPORTABILITY= -fno-second-underscore

416.gamess=default=default=default:
notes70= 416.gamess: EXTRA_FFLAGS= -ffixed-form
notes72= 416.gamess: FPPFLAGS= -DSPEC_CPU_LINUX
EXTRA_FFLAGS= -ffixed-form
FPPPORTABILITY= -DSPEC_CPU_LINUX 
srcalt=bug_53086

456.hmmer=default=default=default:
notes55= 456.hmmer: -lm -funsigned-char
EXTRA_CFLAGS= -funsigned-char
EXTRA_LDFLAGS= -lm 

462.libquantum=default=default=default:
notes60= 462.libquantum: -DSPEC_CPU_LINUX
EXTRA_CFLAGS=  -DSPEC_CPU_LINUX

465.tonto=default=default=default:
FPPPORTABILITY= -DLANGUAGE_FORTRAN_90
srcalt=nullify

464.h264ref=default=default=default:
EXTRA_LIBS= -lm
srcalt=bug_53073

481.wrf=default=default=default:
PORTABILITY   = -DSPEC_CPU_LINUX -DSPEC_CPU_CASE_FLAG -DSPEC_CPU_LOGICAL_STRICT
FPORTABILITY  = -frecord-marker=4

483.xalancbmk=default=default=default:
EXTRA_CXXFLAGS= -DSPEC_CPU_LINUX
