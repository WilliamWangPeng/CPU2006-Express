################################################################
# SPEC CPU2006 config file for gcc
# running on Intel x86_64 processor
################################################################
action      = validate
tune        = base
output_format = csv,text,html,config
ext         = lnx32-gcc
allow_extension_override = yes
PATHSEP     = /

check_md5=0

default=default=default=default:
CC  = gcc -m64 -static
CXX = g++ -m64 -static
FC  = gfortran -m64 -static
F77  = gfortran -m64 -static
OBJ = .o

#####################################################################
# Optimization
#####################################################################
# Peak is high opt
default=peak=default=default:

OPTIMIZE = -Ofast -funroll-loops -flto -mfpmath=sse -fno-aggressive-loop-optimizations
PASS1_CFLAGS     = $(OPTIMIZE) -fprofile-generate
PASS2_CFLAGS     = $(OPTIMIZE) -fprofile-use
PASS1_FFLAGS     = $(OPTIMIZE) -fprofile-generate
PASS2_FFLAGS     = $(OPTIMIZE) -fprofile-use
PASS1_CXXFLAGS   = $(OPTIMIZE) -fprofile-generate
PASS2_CXXFLAGS   = $(OPTIMIZE) -fprofile-use
PASS1_LDCFLAGS   = $(OPTIMIZE) -fprofile-generate
PASS2_LDCFLAGS   = $(OPTIMIZE) -fprofile-use
PASS1_LDCXXFLAGS = $(OPTIMIZE) -fprofile-generate
PASS2_LDCXXFLAGS = $(OPTIMIZE) -fprofile-use
PASS1_LDFFLAGS   = $(OPTIMIZE) -fprofile-generate
PASS2_LDFFLAGS   = $(OPTIMIZE) -fprofile-use

feedback=1

## Base is low opt
default=base=default=default:
OPTIMIZE  = -Ofast -funroll-loops -flto -mfpmath=sse -fno-aggressive-loop-optimizations

#####################################################################
# Portability
#####################################################################

default=default=default=default:
notes25= PORTABILITY=-DSPEC_CPU_LP64 is applied to all benchmarks.
PORTABILITY = -DSPEC_CPU_LP64

#403.gcc=default=default=default:
#notes30= 403.gcc: -Dalloca=_builtin_alloca
#EXTRA_CFLAGS= -Dalloca=__builtin_alloca

400.perlbench=default=default=default:
notes35    = 400.perlbench: -DSPEC_CPU_LINUX_X64
EXTRA_CFLAGS = -DSPEC_CPU_LINUX_X64 -fno-strict-aliasing
#srcalt=attribute

#447.dealII=default=default=default:
#srcalt=cstddef

450.soplex=default=default=default:
EXTRA_CXXFLAGS = -fno-strict-aliasing

# PGI uses this;
#435.gromacs=default=default=default:
#notes40= 435.gromacs: EXTRA_LDFLAGS= -Mnomain
#EXTRA_LDFLAGS= -Mnomain

436.cactusADM=default=default=default:
notes45= cactusADM: FPORTABILITY= -fno-second-underscore
#PGI uses this: EXTRA_LDFLAGS= -Mnomain
FPORTABILITY= -fno-second-underscore

416.gamess=default=default=default:
notes70= 416.gamess: EXTRA_FFLAGS= -ffixed-form
notes72= 416.gamess: FPPFLAGS= -DSPEC_CPU_LINUX
EXTRA_FFLAGS= -ffixed-form
FPPPORTABILITY= -DSPEC_CPU_LINUX 
#srcalt=bug_53086

456.hmmer=default=default=default:
notes55= 456.hmmer: -lm -funsigned-char
EXTRA_CFLAGS= -funsigned-char
EXTRA_LDFLAGS= -lm 

462.libquantum=default=default=default:
notes60= 462.libquantum: -DSPEC_CPU_LINUX
EXTRA_CFLAGS=  -DSPEC_CPU_LINUX

#465.tonto=default=default=default:
#FPPPORTABILITY= -DLANGUAGE_FORTRAN_90
#srcalt=nullify

464.h264ref=default=default=default:
EXTRA_LIBS= -lm
#srcalt=bug_53073

481.wrf=default=default=default:
PORTABILITY   = -DSPEC_CPU_LINUX -DSPEC_CPU_CASE_FLAG -DSPEC_CPU_LOGICAL_STRICT
FPORTABILITY  = -frecord-marker=4

483.xalancbmk=default=default=default:
EXTRA_CXXFLAGS= -DSPEC_CPU_LINUX

################################################################
# SPEC CPU options for gcc on IA32/Intel64
################################################################

################################################################
# -march=native
################################################################
default=default=default=native:
COPTIMIZE    = -march=native
CXXOPTIMIZE  = $(COPTIMIZE)
FOPTIMIZE    = $(COPTIMIZE)

################################################################
# -march=atom
################################################################
default=default=default=atom:
COPTIMIZE    = -march=atom -mtune=atom
CXXOPTIMIZE  = $(COPTIMIZE)
FOPTIMIZE    = $(COPTIMIZE)

################################################################
# -march=slm
################################################################
default=default=default=slm:
COPTIMIZE    = -march=slm
CXXOPTIMIZE  = $(COPTIMIZE)
FOPTIMIZE    = $(COPTIMIZE)

################################################################
# -march=core2
################################################################
default=default=default=core2:
COPTIMIZE    = -march=core2
CXXOPTIMIZE  = $(COPTIMIZE)
FOPTIMIZE    = $(COPTIMIZE)

################################################################
# -march=corei7
################################################################
default=default=default=corei7:
COPTIMIZE    = -march=corei7
CXXOPTIMIZE  = $(COPTIMIZE)
FOPTIMIZE    = $(COPTIMIZE)

################################################################
# -march=corei7-avx
################################################################
default=default=default=corei7-avx:
COPTIMIZE    = -march=corei7-avx
CXXOPTIMIZE  = $(COPTIMIZE)
FOPTIMIZE    = $(COPTIMIZE)

################################################################
# -march=core-avx2
################################################################
default=default=default=core-avx2:
COPTIMIZE    = -march=core-avx2
CXXOPTIMIZE  = $(COPTIMIZE)
FOPTIMIZE    = $(COPTIMIZE)
